<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Triboom - Ponto Eletr√¥nico</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <div id="tela-login" class="login-container">
    <div class="login-box">
      <img src="imagens/Logo.jpg" alt="Logo Triboom" class="logo-login">
      <h2>Acesso ao Sistema</h2>
      <div class="input-group">
        <label>Usu√°rio</label>
        <input type="text" id="usuario" placeholder="Digite seu usu√°rio">
      </div>
      <div class="input-group">
        <label>Senha</label>
        <input type="password" id="senha" placeholder="Digite sua senha">
      </div>
      <button id="btnLogin">ENTRAR</button>
      <p id="msg-erro" class="erro"></p>
    </div>
  </div>

  <div id="tela-dashboard" style="display: none;">
    
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="imagens/Logo.jpg" alt="Logo" class="logo-sidebar">
        <h3>Triboom</h3>
      </div>
      <nav>
        <ul>
          <li data-target="dashboard" class="ativo">üè† In√≠cio</li>
          <li data-target="apontamento">‚è±Ô∏è Apontamento</li>
          <li data-target="relatorios">üìä Relat√≥rios</li>
          <li data-target="caixa">üí∞ Caixa</li>
          <li data-target="funcionarios">üë• Funcion√°rios</li>
          <li data-target="usuarios">üîê Usu√°rios</li>
        </ul>
      </nav>
      <div class="sidebar-footer">
        <span id="display-nome-usuario">Usu√°rio</span>
        <button class="btn-sair">Sair</button>
      </div>
    </aside>

    <main class="content">
      <header class="topbar">
        <button id="btn-menu-mobile">‚ò∞</button>
        <h2 id="titulo-secao">IN√çCIO</h2>
      </header>

      <section id="view-dashboard" class="view-section">
        <div class="cards-resumo">
          <div class="card">
            <h3>Funcion√°rios</h3>
            <p id="total-funcs">0</p>
          </div>
          <div class="card">
            <h3>Saldo Caixa</h3>
            <p id="dash-saldo">R$ 0,00</p>
          </div>
          <div class="card">
            <h3>Hoje</h3>
            <p id="data-hoje">-</p>
          </div>
        </div>
      </section>

      <section id="view-apontamento" class="view-section" style="display:none;">
        <div class="apontamento-card">
            <div class="sel-funcionario-box">
                <label>Funcion√°rio:</label>
                <select id="apontamento-funcionario"></select>
            </div>
            
            <div class="data-display">
                <h3 id="apontamento-data">--/--/----</h3>
                <p id="apontamento-status">Carregando...</p>
            </div>

            <div class="botoes-ponto">
                <button id="btnApEntrada" class="btn-ponto entrada">ENTRADA<br><span id="apontamento-hora-entrada">-</span></button>
                <button id="btnApIntIni" class="btn-ponto intervalo">SA√çDA INT.<br><span id="apontamento-hora-int-ini">-</span></button>
                <button id="btnApIntFim" class="btn-ponto intervalo">VOLTA INT.<br><span id="apontamento-hora-int-fim">-</span></button>
                <button id="btnApSaida" class="btn-ponto saida">SA√çDA<br><span id="apontamento-hora-saida">-</span></button>
            </div>

            <div class="obs-box">
                <label>Observa√ß√£o:</label>
                <input type="text" id="apontamento-obs" placeholder="Opcional">
            </div>

            <button id="btnApEditar" style="display:none; margin-top:10px;">Editar Manualmente</button>
        </div>

        <div id="apontamento-manual" style="display:none; border:1px solid #ccc; padding:10px; margin-top:10px; background:white;">
            <h4>Lan√ßamento Manual (Admin)</h4>
            <label>Data: <input type="date" id="ap-man-data"></label><br>
            <label><input type="checkbox" id="ap-man-folga"> √â Folga?</label>
            <div class="grid-manual">
                <input type="time" id="ap-man-entrada" title="Entrada">
                <input type="time" id="ap-man-int-ini" title="In√≠cio Intervalo">
                <input type="time" id="ap-man-int-fim" title="Fim Intervalo">
                <input type="time" id="ap-man-saida" title="Sa√≠da">
            </div>
            <button id="btnApSalvarManual" style="margin-top:10px;">Salvar Ajuste</button>
        </div>
      </section>

      <section id="view-relatorios" class="view-section" style="display:none;">
          <div class="card" style="text-align:left; margin-bottom:20px;">
              <label>Funcion√°rio:</label>
              <select id="rel-func-select" style="padding:8px; margin-right:10px;"></select>
              <label>De:</label>
              <input type="date" id="rel-data-ini" style="padding:8px;">
              <label>At√©:</label>
              <input type="date" id="rel-data-fim" style="padding:8px;">
              <button id="btnGerarRelatorio" class="btn-add" style="margin-left:10px;">Filtrar</button>
          </div>
          <table class="tabela-padrao">
              <thead>
                  <tr>
                      <th>Data</th>
                      <th>Entrada</th>
                      <th>Int. Ini</th>
                      <th>Int. Fim</th>
                      <th>Sa√≠da</th>
                      <th>Obs</th>
                  </tr>
              </thead>
              <tbody id="lista-relatorios-corpo"></tbody>
          </table>
      </section>

      <section id="view-caixa" class="view-section" style="display:none;">
          <div class="cards-resumo" style="margin-bottom:20px;">
              <div class="card">
                  <h3>Saldo Atual</h3>
                  <p id="caixa-saldo-topo" style="color:#27ae60;">R$ 0,00</p>
              </div>
          </div>
          
          <div class="card" style="text-align:left; margin-bottom:20px;">
              <h4>Nova Movimenta√ß√£o</h4>
              <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
                  <input type="text" id="caixa-desc" placeholder="Descri√ß√£o (ex: Caf√©)" style="flex:2; padding:8px;">
                  <input type="number" id="caixa-valor" placeholder="Valor (R$)" step="0.01" style="flex:1; padding:8px;">
                  <select id="caixa-tipo" style="padding:8px;">
                      <option value="saida">üî¥ Sa√≠da (Gasto)</option>
                      <option value="entrada">üü¢ Entrada (Ganho)</option>
                  </select>
                  <button id="btnLancarCaixa" class="btn-add" style="margin:0;">Lan√ßar</button>
              </div>
          </div>

          <table class="tabela-padrao">
              <thead>
                  <tr>
                      <th>Data</th>
                      <th>Descri√ß√£o</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                      <th>A√ß√£o</th>
                  </tr>
              </thead>
              <tbody id="lista-caixa-corpo"></tbody>
          </table>
      </section>

      <section id="view-funcionarios" class="view-section" style="display:none;">
        <button id="btnNovoFuncionario" class="btn-add">+ Novo Funcion√°rio</button>
        <table class="tabela-padrao">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>CPF</th>
                    <th>Fun√ß√£o</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody id="lista-funcionarios-corpo"></tbody>
        </table>
      </section>

      <section id="view-usuarios" class="view-section" style="display:none;">
        <button id="btnNovoUsuario" class="btn-add">+ Novo Usu√°rio</button>
        <table class="tabela-padrao">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Login</th>
                    <th>Perfil</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody id="lista-usuarios-corpo"></tbody>
        </table>
      </section>

    </main>
  </div>

  <div id="modal-usuario" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Salvar Usu√°rio</h3>
        <input type="hidden" id="usuario_id_edit">
        <label>Nome:</label><input type="text" id="user_nome">
        <label>Login:</label><input type="text" id="user_login">
        <label>Senha:</label><input type="text" id="user_senha">
        <label>Perfil:</label>
        <select id="user_perfil">
            <option value="Funcionario">Funcion√°rio</option>
            <option value="Admin">Administrador</option>
        </select>
        <button id="btnSalvarUsuario" class="btn-save">Salvar</button>
    </div>
  </div>

  <div id="modal-funcionario" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Salvar Funcion√°rio</h3>
        <input type="hidden" id="func_id_edit">
        <label>Nome Completo:</label><input type="text" id="func_nome">
        <label>CPF:</label><input type="text" id="func_cpf">
        <label>Fun√ß√£o:</label><input type="text" id="func_funcao">
        <button id="btnSalvarFuncionario" class="btn-save">Salvar</button>
    </div>
  </div>
<script src="secrets.js"></script>

  <script src="app.js"></script>
</body>
</html>
  <script src="app.js"></script>
</body>
</html>